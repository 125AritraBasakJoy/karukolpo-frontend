<!-- ===== CUSTOMER-FACING: ORDER DETAILS (visible on screen) ===== -->
<div class="order-details-view">
    <div class="order-details-card">

        <!-- Logo -->
        <div class="od-logo-section">
            <img src="assets/invoice-logo-mandala.jpg" alt="Karukolpo" class="od-logo" />
        </div>

        <!-- Title -->
        <h2 class="od-title">ORDER DETAILS</h2>

        <!-- Order ID + Date -->
        <div class="od-info-row">
            <div>
                <span class="od-label">ORDER ID</span>
                <div class="od-value od-order-id">#{{ placedOrderId }}</div>
            </div>
            <div class="od-text-right">
                <span class="od-label">DATE ISSUED</span>
                <div class="od-value">{{ formattedDate }}</div>
            </div>
        </div>

        <!-- Customer + Phone -->
        <div class="od-info-row">
            <div>
                <span class="od-label">CUSTOMER</span>
                <div class="od-value od-customer-name">{{ orderFormSnapshot.fullName || '—' }}</div>
            </div>
            <div class="od-text-right">
                <span class="od-label">PHONE</span>
                <div class="od-value">{{ orderFormSnapshot.phoneNumber || '—' }}</div>
            </div>
        </div>

        <!-- Shipping Address -->
        <div class="od-address-section">
            <span class="od-label">SHIPPING ADDRESS</span>
            <div class="od-address-text">
                {{ orderFormSnapshot.fullAddress || '—' }}<span *ngIf="orderFormSnapshot.subDistrict">, {{
                    orderFormSnapshot.subDistrict }}</span><span *ngIf="orderFormSnapshot.district">, {{
                    orderFormSnapshot.district }}</span><span *ngIf="orderFormSnapshot.postalCode">, {{
                    orderFormSnapshot.postalCode }}</span>
            </div>
        </div>

        <!-- Products Table -->
        <table class="od-table">
            <thead>
                <tr>
                    <th class="od-col-name">PRODUCT</th>
                    <th class="od-col-qty">QTY</th>
                    <th class="od-col-price">PRICE</th>
                    <th class="od-col-total">TOTAL</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of orderedItems">
                    <td class="od-col-name">{{ item.product?.name || 'Product' }}</td>
                    <td class="od-col-qty">{{ item.quantity }}</td>
                    <td class="od-col-price">৳{{ item.product?.price | number:'1.2-2' }}</td>
                    <td class="od-col-total">৳{{ (item.product?.price || 0) * (item.quantity || 0) | number:'1.2-2' }}
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Totals -->
        <div class="od-totals">
            <div class="od-total-row">
                <span>SUBTOTAL</span>
                <span>৳{{ subtotal | number:'1.2-2' }}</span>
            </div>
            <div class="od-total-row">
                <span>DELIVERY CHARGE</span>
                <span>৳{{ orderDeliveryCharge | number:'1.2-2' }}</span>
            </div>
            <div class="od-grand-total-row">
                <span>GRAND TOTAL</span>
                <span class="od-grand-total-value">৳{{ grandTotal | number:'1.2-2' }}</span>
            </div>
        </div>

        <!-- Payment Method -->
        <div class="od-payment-row">
            <span class="od-label">PAYMENT METHOD</span>
            <span class="od-payment-value">{{ paymentMethodDisplay }}</span>
        </div>

    </div>

    <!-- Action Buttons -->
    <div class="od-actions">
        <button class="btn-download-invoice" (click)="downloadReceipt()">
            <i class="pi pi-download"></i> Download Invoice
        </button>
        <button class="btn-continue-shopping" (click)="continueShopping()">
            <i class="pi pi-shopping-bag"></i> Continue Shopping
        </button>
    </div>
</div>