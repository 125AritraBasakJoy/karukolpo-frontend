<div class="page-wrapper">
  <div class="track-order-container">
    <div class="search-section">
      <h2>Track Your Order</h2>
      <div class="p-inputgroup w-full md:w-30rem mx-auto mb-3">
        <input type="text" pInputText placeholder="Enter Order ID or Phone Number" [(ngModel)]="orderId"
          (keyup.enter)="trackOrder()">
        <button type="button" pButton icon="pi pi-search" label="Track" (click)="trackOrder()"></button>
      </div>
      <div class="text-center">
        <p-button label="Back to Home" icon="pi pi-arrow-left" [text]="true" (onClick)="goBack()"></p-button>
      </div>
    </div>



    <div *ngIf="loading()" class="order-details mt-5">
      <p-card>
        <div class="grid">
          <div class="col-12 md:col-6">
            <p-skeleton width="10rem" height="1.5rem" styleClass="mb-2"></p-skeleton>
            <p-skeleton width="8rem" styleClass="mb-2"></p-skeleton>
            <p-skeleton width="6rem" styleClass="mb-2"></p-skeleton>
            <p-skeleton width="8rem" styleClass="mb-2"></p-skeleton>
          </div>
          <div class="col-12 md:col-6">
            <p-skeleton width="8rem" height="1.5rem" styleClass="mb-2"></p-skeleton>
            <p-skeleton width="10rem" styleClass="mb-2"></p-skeleton>
            <p-skeleton width="12rem" styleClass="mb-2"></p-skeleton>
            <p-skeleton width="10rem" styleClass="mb-2"></p-skeleton>
          </div>
        </div>
        <div class="mt-4">
          <p-skeleton width="5rem" height="1.5rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton styleClass="mb-2"></p-skeleton>
          <p-skeleton styleClass="mb-2"></p-skeleton>
        </div>
      </p-card>
    </div>

    <div *ngIf="order() && !loading()" class="order-details mt-5">
      <p-card>
        <div class="grid">
          <div class="col-12 md:col-6">
            <h3>Order Status:
              <p-tag [value]="order()?.status"
                [severity]="order()?.status === 'Pending' ? 'warning' : (order()?.status === 'Approved' ? 'info' : (order()?.status === 'Completed' ? 'success' : (order()?.status === 'Delivered' ? 'success' : 'danger')))"></p-tag>
            </h3>
            <p><strong>Order ID:</strong> {{ order()?.id }}</p>
            <p><strong>Date:</strong> {{ order()?.orderDate | date:'medium' }}</p>
            <p><strong>Total Amount:</strong> {{ order()?.totalAmount | currency:'BDT':'symbol-narrow' }}</p>
          </div>
          <div class="col-12 md:col-6">
            <h3>Shipping Details</h3>
            <p>{{ order()?.fullName }}</p>
            <p>{{ order()?.fullAddress }}</p>
            <p>{{ order()?.district }} - {{ order()?.postalCode }}</p>
            <p>{{ order()?.phoneNumber }}</p>
          </div>
        </div>

        <div class="mt-4">
          <h3>Items</h3>
          <ul>
            <li *ngFor="let item of order()?.items">
              {{ item.quantity }}x {{ item.product.name }} - {{ item.product.price | currency:'BDT':'symbol-narrow' }}
            </li>
          </ul>
        </div>
      </p-card>
    </div>
  </div>
</div>
<p-toast></p-toast>