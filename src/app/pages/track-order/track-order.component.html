<!-- Theme Toggle Button -->
<app-theme-toggle></app-theme-toggle>

<div class="page-wrapper">
  <div class="track-order-container">
    <div class="search-section py-4 border-bottom-1 border-100 mb-6">
      <h2 class="text-3xl font-bold mb-5">Track Your Order</h2>
      <div class="flex align-items-center justify-content-center gap-3 w-full md:w-35rem mx-auto mb-4">
        <input type="text" pInputText placeholder="017..." [(ngModel)]="orderId" (keyup.enter)="trackOrder()"
          class="flex-1">
        <button type="button" pButton icon="pi pi-search" (click)="trackOrder()" class="p-button-icon-only"></button>
      </div>
      <p class="text-color-secondary mb-0">Enter your order ID or registered phone number</p>
    </div>
    <div class="text-center">
      <p-button label="Back to Home" icon="pi pi-arrow-left" [text]="true" severity="secondary"
        (onClick)="goBack()"></p-button>
    </div>
  </div>



  <div *ngIf="loading()" class="order-details mt-5">
    <p-card>
      <div class="grid">
        <div class="col-12 md:col-6">
          <p-skeleton width="10rem" height="1.5rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="8rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="6rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="8rem" styleClass="mb-2"></p-skeleton>
        </div>
        <div class="col-12 md:col-6">
          <p-skeleton width="8rem" height="1.5rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="10rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="12rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="10rem" styleClass="mb-2"></p-skeleton>
        </div>
      </div>
      <div class="mt-4">
        <p-skeleton width="5rem" height="1.5rem" styleClass="mb-2"></p-skeleton>
        <p-skeleton styleClass="mb-2"></p-skeleton>
        <p-skeleton styleClass="mb-2"></p-skeleton>
      </div>
    </p-card>
  </div>

  <div *ngIf="order() && !loading()" class="order-details mt-5">
    <p-card>
      <div class="grid">
        <div class="col-12 md:col-6">
          <h3>Order Status:
            <p-tag [value]="order()?.status" [severity]="getSeverity(order()?.status)"></p-tag>
          </h3>
          <p><strong>Order ID:</strong> {{ order()?.id }}</p>
          <p><strong>Date:</strong> {{ order()?.orderDate | date:'medium' }}</p>
          <p><strong>Total Amount:</strong> {{ order()?.totalAmount | currency:'BDT':'symbol-narrow' }}</p>
        </div>
        <div class="col-12 md:col-6">
          <h3>Shipping Details</h3>
          <p>{{ order()?.fullName }}</p>
          <p>{{ order()?.fullAddress }}</p>
          <p>{{ order()?.district }} - {{ order()?.postalCode }}</p>
          <p>{{ order()?.phoneNumber }}</p>
        </div>
      </div>

      <div class="mt-4">
        <h3>Items</h3>
        <ul>
          <li *ngFor="let item of order()?.items">
            {{ item.quantity }}x {{ item.product.name }} - {{ item.product.price | currency:'BDT':'symbol-narrow' }}
          </li>
        </ul>
      </div>
    </p-card>
  </div>
</div>
<p-toast></p-toast>